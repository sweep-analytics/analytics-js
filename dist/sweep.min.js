/*!
 * sweep-analytics-js v0.0.1
 * Copyright (c) 2019-2019 Fabian Bentz & Jonas Regner
 * License: MIT
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).sweep=n()}(this,function(){"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}for(var o=function(t,n){return t(n={exports:{}},n.exports),n.exports}(function(t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var e=new Uint8Array(16);t.exports=function(){return n(e),e}}else{var o=new Array(16);t.exports=function(){for(var t,n=0;n<16;n++)0==(3&n)&&(t=4294967296*Math.random()),o[n]=t>>>((3&n)<<3)&255;return o}}}),r=[],a=0;a<256;++a)r[a]=(a+256).toString(16).substr(1);var i=function(t,n){var e=n||0,o=r;return[o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]]].join("")};var c=function(t,n,e){var r=n&&e||0;"string"==typeof t&&(n="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var c=0;c<16;++c)n[r+c]=a[c];return n||i(a)},u=function(){function n(){t(this,n)}return e(n,[{key:"set",value:function(t,n){var e=new Date;e.setTime(e.getTime()+31536e6);var o="; expires="+e.toUTCString();document.cookie=t+"="+(n||"")+o+"; path=/"}},{key:"get",value:function(t){for(var n=t+"=",e=document.cookie.split(";"),o=0;o<e.length;o++){for(var r=e[o];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(n))return r.substring(n.length,r.length)}return null}}]),n}();return function(){function n(e){t(this,n),this.clientId=e,this.trackEventMutation=function(){return"mutation trackEvent($name: String!, $client: String!, $meta: JSON) {\n          trackEvent(input: { name: $name, client: $client, meta: $meta }) { \n            name,\n            client,\n            meta\n          }\n        }"}}return e(n,[{key:"trackPageViews",value:function(){u.get("s_a_js_uid")||u.set("s_a_js_uid",c());var t=document.location.pathname,n=document.referrer,e=navigator.language,o=navigator.platform,r="".concat(r.width,"x").concat(r.height),a={url:t,referrer:n,anonymousId:u.get("s_a_js_uid"),language:e,platform:o,screen:r},i={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({operationName:"trackEvent",query:this.trackEventMutation(),variables:{name:"userSession",client:this.clientId,meta:a}})};fetch("https://api.sweep-analytics.com/graphql",i).then(function(t){console.log(t.json())}).catch(function(t){console.log(t)})}},{key:"trackEvent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.get("s_a_js_uid")||u.set("s_a_js_uid",c()),n.path=document.location.pathname;var e={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({operationName:"trackEvent",query:this.trackEventMutation(),variables:{name:t,client:this.clientId,meta:n}})};fetch("https://api.sweep-analytics.com/graphql",e).then(function(t){console.log(t.json())}).catch(function(t){console.log(t)})}}]),n}()});
