/*!
 * sweep-analytics-js v0.0.1
 * Copyright (c) 2019-2019 Fabian Bentz & Jonas Regner
 * License: MIT
 */
!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}for(var n=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}}),r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);var i=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")};var a=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var c=0;c<16;++c)t[o+c]=a[c];return t||i(a)};function c(e,t){var n=new Date;n.setTime(n.getTime()+31536e6);var r="; expires="+n.toUTCString();document.cookie=e+"="+(t||"")+r+"; path=/"}function s(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}var u=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clientId=t,window.sweep={sweepApiKey:t}},p=function(){return"mutation trackEvent($name: String!, $client: String!, $meta: JSON) {\n  trackEvent(input: { name: $name, client: $client, meta: $meta }) { \n    name,\n    client,\n    meta\n  }\n}"};var l,f=(l=document.currentScript,console.log(l.getAttribute("key")),{key:l.getAttribute("key")});document.addEventListener("DOMContentLoaded",function(){console.log("Your document is ready!");new u(f.key);y(),[].slice.call(document.querySelectorAll("[data-sweep-click]")).forEach(function(n){n.addEventListener("click",function(n){var r=n.target.getAttribute("data-sweep-click");d("click",function(n){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(o,!0).forEach(function(t){e(n,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):t(o).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({},r.split(",")))})})});var d=function(e,t){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s("s_a_js_uid")||c("s_a_js_uid",a());var n=window.sweep.sweepApiKey;if(!n)throw new Error("No api key provided");t.path=document.location.pathname;var r={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({operationName:"trackEvent",query:p(),variables:{name:e,client:n,meta:t}})};fetch("https://api.sweep-analytics.com/public",r).then(function(e){console.log("click event tracked")}).catch(function(e){console.log(e)})}(e,t)},y=function(){!function(e){s("s_a_js_uid")||c("s_a_js_uid",a());var t=window.sweep.sweepApiKey;if(!t)throw new Error("No api key provided");var n=document.location.pathname,r=document.referrer,o=navigator.language,i=navigator.platform,u="".concat(window.screen.width,"x").concat(window.screen.height),l={url:n,referrer:r,anonymousId:s("s_a_js_uid"),language:o,platform:i,screen:u},f={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({operationName:"trackEvent",query:p(),variables:{name:"userSession",client:t,meta:l}})};fetch("https://api.sweep-analytics.com/public",f).then(function(e){console.log("pageview tracked")}).catch(function(e){console.log(e)})}()}});
